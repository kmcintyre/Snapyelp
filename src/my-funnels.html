<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../bower_components/paper-fab/paper-fab.html">

<link rel="import" href="redux-mixin.html">

<dom-module id="my-funnels">
   <template>
      <style include="shared-styles iron-flex iron-flex-alignment">
         :host {
         }   			   
         paper-fab {
         margin: 5px;
         background-color: #0077C5;
         }
      </style>
      <app-toolbar class$="{{ visible(hidden) }}">
         <paper-icon-button icon="{{ icon(hidden) }}" on-click="hide"></paper-icon-button>
         <div main-title>Funnels</div>         
      </app-toolbar>
      <div>
         <template is="dom-repeat" items="{{ funnels }}" as="funnel">         	
            Name: {{ funnel.name }}
            Jobs: {{ funnel.job.length }}            
            <paper-fab mini 
            icon="[[publish.icon]]" 
            title="[[publish.title]]" 												
            on-click="share"
            disabled$="{{ !enabled }}"
            hidden$="{{ hidden }}"
            ></paper-fab>            
         </template>
      </div>
   </template>
   <script>
   class MyFunnels extends ReduxMixin(Polymer.Element) {
       static get is() {
           return 'my-funnels';
       }
       static get properties() {
           return {
               hidden: {
                   value: false
               },
               funnels: {
                   type: Array,
                   statePath: 'funnels'
               },
               publish: {
                   value: {
                       icon: 'social:share',
                       title: 'Export Funnel'
                   }
               }
           }
       }
       visible(hidden) {
           return this.hidden ? 'collapse' : '';
       }
       ready() {
           super.ready()
       }
       hide(e) {
           this.hidden = !this.hidden;
       }
       icon(h) {
           return this.hidden ? 'add' : 'remove';
       }
   }
   customElements.define(MyFunnels.is, MyFunnels);
   </script>
</dom-module>